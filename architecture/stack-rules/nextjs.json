{
  "stack": "nextjs",
  "description": "Stack-specific architecture overrides for Next.js projects",

  "layer_mappings": {
    "src/app/": "runtime",
    "src/app/api/": "runtime",
    "src/components/": "ui",
    "src/lib/": "service"
  },

  "overrides": {
    "allowed_cross_layer": [
      {
        "path": "src/app/",
        "can_import_from": ["types", "config", "repo", "service", "runtime", "ui"],
        "reason": "Next.js App Router convention: pages and layouts compose across all layers"
      }
    ]
  },

  "public_entry": "page.tsx|layout.tsx|route.ts|index.ts|index.js",

  "notes": [
    "Next.js App Router uses file-based routing in src/app/",
    "API routes live under src/app/api/ and act as the runtime layer",
    "Components in src/components/ are the ui layer",
    "Shared utilities in src/lib/ map to the service layer"
  ]
}
