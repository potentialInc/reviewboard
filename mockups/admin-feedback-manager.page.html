<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback - ReviewBoard Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-jakarta { font-family: 'Plus Jakarta Sans', sans-serif; }
    </style>
</head>
<body class="bg-[#F8FAFC]">

    <!-- Sidebar Injection -->
    <aside class="fixed left-0 top-0 h-full w-64 bg-[#0F172A] text-slate-400 flex flex-col z-50">
        <div class="h-16 flex items-center px-6 border-b border-white/5">
            <div class="flex items-center gap-2 text-white">
                <div class="w-8 h-8 bg-[#6366F1] rounded-lg flex items-center justify-center text-white">
                    <i data-lucide="layers" class="w-5 h-5"></i>
                </div>
                <span class="font-jakarta font-bold text-lg tracking-tight">ReviewBoard</span>
            </div>
        </div>
        <nav class="flex-1 py-6 px-3 space-y-1">
            <a href="admin-dashboard.page.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-white/5 hover:text-white transition-all group">
                <i data-lucide="layout-dashboard" class="w-5 h-5 group-hover:text-[#6366F1] transition-colors"></i>
                <span class="font-medium text-sm">Dashboard</span>
            </a>
            <a href="admin-projects.page.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-white/5 hover:text-white transition-all group">
                <i data-lucide="folder-kanban" class="w-5 h-5 group-hover:text-[#6366F1] transition-colors"></i>
                <span class="font-medium text-sm">Projects</span>
            </a>
            <a href="admin-feedback-manager.page.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-[#6366F1] text-white transition-all group">
                <i data-lucide="message-square" class="w-5 h-5"></i>
                <span class="font-medium text-sm">Feedback</span>
            </a>
        </nav>
        <div class="p-4 border-t border-white/5">
            <div class="flex items-center gap-3">
                <div class="w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-xs">AD</div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium text-white truncate">Admin User</p>
                    <p class="text-xs text-slate-500 truncate">dev@reviewboard.io</p>
                </div>
                <a href="login.page.html" class="text-slate-500 hover:text-white transition-colors"><i data-lucide="log-out" class="w-4 h-4"></i></a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="ml-64 p-10 min-h-screen">
        <header class="mb-8">
            <h1 class="font-jakarta text-2xl font-bold text-slate-900">Feedback Manager</h1>
            <p class="text-slate-500 mt-1">Review and triage incoming feedback from all projects.</p>
        </header>

        <!-- Filters -->
        <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm mb-6 flex flex-wrap gap-4 items-center">
            <div class="relative flex-1 min-w-[200px]">
                <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                <input type="text" placeholder="Search feedback..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:ring-2 focus:ring-indigo-500/20 focus:border-[#6366F1] outline-none text-sm">
            </div>
            
            <div class="flex items-center gap-2">
                <select class="px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-[#6366F1]">
                    <option>All Projects</option>
                    <option>E-Commerce Mobile App</option>
                    <option>SaaS Dashboard Web</option>
                </select>
                <select class="px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 outline-none focus:border-[#6366F1]">
                    <option>All Statuses</option>
                    <option>Open</option>
                    <option>In Progress</option>
                    <option>Resolved</option>
                </select>
            </div>
        </div>

        <!-- Feedback Table -->
        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
            <table class="w-full text-left border-collapse">
                <thead class="bg-slate-50 text-xs font-semibold text-slate-500 uppercase">
                    <tr>
                        <th class="px-6 py-4 border-b border-slate-200 w-16">Pin</th>
                        <th class="px-6 py-4 border-b border-slate-200">Comment</th>
                        <th class="px-6 py-4 border-b border-slate-200">Context</th>
                        <th class="px-6 py-4 border-b border-slate-200">Status</th>
                        <th class="px-6 py-4 border-b border-slate-200">Date</th>
                        <th class="px-6 py-4 border-b border-slate-200 text-right">Action</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-100 text-sm">
                    
                    <!-- Item 1 -->
                    <tr class="hover:bg-slate-50/50 group transition-colors">
                        <td class="px-6 py-4">
                            <div class="w-6 h-6 rounded-full bg-red-500 text-white flex items-center justify-center text-xs font-bold">1</div>
                        </td>
                        <td class="px-6 py-4">
                            <p class="font-medium text-slate-900 truncate max-w-xs">Logo Alignment is slightly off...</p>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex flex-col">
                                <span class="text-slate-900 font-medium text-xs">Home_V2_Final</span>
                                <span class="text-slate-500 text-[10px]">E-Commerce App</span>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <!-- Direct Status Change Dropdown -->
                            <div class="relative group/status">
                                <select onchange="updateRowStatus(this)" class="appearance-none bg-red-50 text-red-700 text-xs font-bold px-3 py-1.5 rounded-full border border-red-200 outline-none focus:ring-2 focus:ring-red-500/20 cursor-pointer pr-6 hover:bg-red-100 transition-colors">
                                    <option value="open" selected>Open</option>
                                    <option value="in_progress">In Progress</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                                <i data-lucide="chevron-down" class="w-3 h-3 text-red-700 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"></i>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-slate-500 text-xs">2h ago</td>
                        <td class="px-6 py-4 text-right">
                             <button onclick="openFeedbackModal()" class="text-[#6366F1] hover:underline text-xs font-medium">View & Reply</button>
                        </td>
                    </tr>

                    <!-- Item 2 -->
                    <tr class="hover:bg-slate-50/50 group transition-colors">
                        <td class="px-6 py-4">
                            <div class="w-6 h-6 rounded-full bg-yellow-500 text-white flex items-center justify-center text-xs font-bold">2</div>
                        </td>
                        <td class="px-6 py-4">
                            <p class="font-medium text-slate-900 truncate max-w-xs">Button contrast is too low</p>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex flex-col">
                                <span class="text-slate-900 font-medium text-xs">Home_V2_Final</span>
                                <span class="text-slate-500 text-[10px]">E-Commerce App</span>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            <div class="relative group/status">
                                <select onchange="updateRowStatus(this)" class="appearance-none bg-yellow-50 text-yellow-700 text-xs font-bold px-3 py-1.5 rounded-full border border-yellow-200 outline-none focus:ring-2 focus:ring-yellow-500/20 cursor-pointer pr-6 hover:bg-yellow-100 transition-colors">
                                    <option value="open">Open</option>
                                    <option value="in_progress" selected>In Progress</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                                <i data-lucide="chevron-down" class="w-3 h-3 text-yellow-700 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"></i>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-slate-500 text-xs">5h ago</td>
                        <td class="px-6 py-4 text-right">
                             <button onclick="openFeedbackModal()" class="text-[#6366F1] hover:underline text-xs font-medium">View & Reply</button>
                        </td>
                    </tr>

                     <!-- Item 3 -->
                    <tr class="hover:bg-slate-50/50 group transition-colors">
                        <td class="px-6 py-4">
                            <div class="w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center text-xs font-bold">1</div>
                        </td>
                        <td class="px-6 py-4">
                            <p class="font-medium text-slate-900 truncate max-w-xs">Update header font size</p>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex flex-col">
                                <span class="text-slate-900 font-medium text-xs">Analytics_Main</span>
                                <span class="text-slate-500 text-[10px]">SaaS Dashboard</span>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                             <div class="relative group/status">
                                <select onchange="updateRowStatus(this)" class="appearance-none bg-green-50 text-green-700 text-xs font-bold px-3 py-1.5 rounded-full border border-green-200 outline-none focus:ring-2 focus:ring-green-500/20 cursor-pointer pr-6 hover:bg-green-100 transition-colors">
                                    <option value="open">Open</option>
                                    <option value="in_progress">In Progress</option>
                                    <option value="resolved" selected>Resolved</option>
                                </select>
                                <i data-lucide="chevron-down" class="w-3 h-3 text-green-700 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none"></i>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-slate-500 text-xs">1d ago</td>
                        <td class="px-6 py-4 text-right">
                             <button onclick="openFeedbackModal()" class="text-[#6366F1] hover:underline text-xs font-medium">View & Reply</button>
                        </td>
                    </tr>

                </tbody>
            </table>
            
            <!-- Pagination -->
            <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between bg-slate-50/50">
                <span class="text-xs text-slate-500">Showing 1-3 of 42 items</span>
                <div class="flex gap-2">
                    <button class="px-3 py-1 border border-slate-200 rounded bg-white text-xs text-slate-500 disabled:opacity-50" disabled>Previous</button>
                    <button class="px-3 py-1 border border-slate-200 rounded bg-white text-xs text-slate-600 hover:bg-slate-50">Next</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Enhanced View & Reply Modal with Screen Visualization -->
    <div id="reply-modal" class="hidden fixed inset-0 z-[60] bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-5xl h-[85vh] flex overflow-hidden animate-in fade-in zoom-in duration-200">
            
            <!-- Left: Image Viewer & Pin Location -->
            <div class="w-1/2 bg-slate-100 border-r border-slate-200 relative overflow-hidden flex items-center justify-center">
                <!-- Toolbar overlay -->
                <div class="absolute top-4 left-4 z-10 flex gap-2">
                    <span class="bg-white/90 backdrop-blur px-2 py-1 rounded-md text-xs font-medium text-slate-600 shadow-sm border border-slate-200">Home_V2_Final.png</span>
                </div>

                <!-- Canvas -->
                <div class="relative shadow-xl ring-1 ring-slate-900/5 bg-white select-none">
                    <img src="https://picsum.photos/seed/mobileui1/400/711" alt="Screen Context" class="w-[320px] h-auto block opacity-95">
                    
                    <!-- Exact Pin Visualization -->
                    <div class="absolute w-8 h-8 rounded-full bg-red-500 border-2 border-white shadow-lg flex items-center justify-center text-white text-xs font-bold z-20 animate-bounce" style="top: 25%; left: 35%; transform: translate(-50%, -50%);">
                        1
                    </div>
                    
                    <!-- Other Pins Context (Ghosted) -->
                    <div class="absolute w-6 h-6 rounded-full bg-yellow-500/50 border border-white/50 flex items-center justify-center text-white text-[10px] font-bold z-10" style="top: 45%; left: 75%; transform: translate(-50%, -50%);">
                        2
                    </div>
                </div>
            </div>

            <!-- Right: Conversation -->
            <div class="w-1/2 flex flex-col h-full bg-white">
                <!-- Header -->
                <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center shrink-0">
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <!-- Dynamic Status Badge in Modal Header -->
                            <span id="modal-status-badge" class="bg-red-100 text-red-700 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide border border-red-200">Open</span>
                            <span class="text-xs text-slate-400">#FB-8821</span>
                        </div>
                        <h3 class="font-bold text-slate-900 text-lg">Logo Alignment</h3>
                        <p class="text-xs text-slate-500">Home_V2_Final â€¢ 2h ago</p>
                    </div>
                    <button onclick="document.getElementById('reply-modal').classList.add('hidden')" class="p-2 hover:bg-slate-50 rounded-full text-slate-400 hover:text-slate-600 transition-colors">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>

                <!-- Thread -->
                <div class="flex-1 overflow-y-auto p-6 space-y-6">
                    <!-- Original Feedback -->
                    <div class="flex gap-4">
                        <div class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xs shrink-0">CL</div>
                        <div>
                            <div class="flex items-baseline gap-2">
                                <span class="font-semibold text-sm text-slate-900">Client</span>
                                <span class="text-xs text-slate-400">2h ago</span>
                            </div>
                            <div class="mt-1 text-sm text-slate-600 leading-relaxed bg-slate-50 p-3 rounded-tr-lg rounded-br-lg rounded-bl-lg border border-slate-100">
                                The logo feels slightly off-center to the left. Can we center align it perfectly relative to the search bar?
                            </div>
                        </div>
                    </div>

                    <!-- System Note (Example) -->
                    <div class="flex justify-center">
                        <span class="text-[10px] text-slate-400 bg-slate-50 px-3 py-1 rounded-full border border-slate-100">Admin viewed 1h ago</span>
                    </div>
                </div>

                <!-- Footer Reply -->
                <div class="p-6 border-t border-slate-100 bg-slate-50/50 shrink-0">
                    <div class="mb-3">
                         <textarea class="w-full h-24 p-3 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-[#6366F1] outline-none resize-none bg-white shadow-sm" placeholder="Write a reply..."></textarea>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3 bg-white px-3 py-1.5 rounded-lg border border-slate-200">
                             <span class="text-xs font-medium text-slate-500">Set Status:</span>
                             <select id="modal-status-select" class="text-xs font-semibold text-slate-700 bg-transparent outline-none cursor-pointer">
                                 <option value="open" selected>Open</option>
                                 <option value="in_progress">In Progress</option>
                                 <option value="resolved">Resolved</option>
                             </select>
                        </div>
                        <button onclick="alert('Status updated & reply sent!'); document.getElementById('reply-modal').classList.add('hidden')" class="px-4 py-2 bg-[#6366F1] hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors shadow-md">
                            Update & Reply
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        
        function openFeedbackModal() {
            document.getElementById('reply-modal').classList.remove('hidden');
        }

        // JS to handle color changes for the table dropdowns
        function updateRowStatus(select) {
            const val = select.value;
            // Reset classes
            select.className = select.className.replace(/bg-\w+-50 text-\w+-700 border-\w+-200/g, '');
            const icon = select.nextElementSibling; // The chevron icon
            icon.className = icon.className.replace(/text-\w+-700/g, '');

            let colorBase = '';
            if(val === 'open') colorBase = 'red';
            if(val === 'in_progress') colorBase = 'yellow';
            if(val === 'resolved') colorBase = 'green';

            // Apply new classes
            select.classList.add(`bg-${colorBase}-50`, `text-${colorBase}-700`, `border-${colorBase}-200`);
            icon.classList.add(`text-${colorBase}-700`);
        }
    </script>
</body>
</html>